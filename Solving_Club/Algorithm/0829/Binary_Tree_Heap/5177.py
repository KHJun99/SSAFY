# [íŒŒì´ì¬ S/W ë¬¸ì œí•´ê²° ê¸°ë³¸] 8ì¼ì°¨ - ì´ì§„ í™ (D2)
"""
1. ìµœì†Œí™(Heap)ì˜ íŠ¹ì§•

- ì™„ì „ ì´ì§„ íŠ¸ë¦¬ ìœ ì§€: í•­ìƒ ë§ˆì§€ë§‰ ë…¸ë“œ ë’¤ì— ìƒˆ ë…¸ë“œë¥¼ ì¶”ê°€í•œë‹¤.
- ë¶€ëª¨ â‰¤ ìì‹: ë¶€ëª¨ ë…¸ë“œ ê°’ì´ ìì‹ ë…¸ë“œë³´ë‹¤ í•­ìƒ ì‘ê±°ë‚˜ ê°™ë‹¤. ì¡°ê±´ì„ ë§Œì¡±í•˜ì§€ ì•Šìœ¼ë©´ ë¶€ëª¨ì™€ ê°’ì„ êµí™˜(swap).
- ë…¸ë“œ ë²ˆí˜¸ ë¶€ì—¬: ë£¨íŠ¸ëŠ” 1ë²ˆ, ì™¼ìª½â†’ì˜¤ë¥¸ìª½ ìˆœì„œë¡œ ë²ˆí˜¸ë¥¼ ë¶™ì¸ë‹¤.

2. ì˜ˆì‹œ

- ì…ë ¥: 7, 2, 5, 3, 4, 6
- ê²°ê³¼ íŠ¸ë¦¬:
markdown
ì½”ë“œ ë³µì‚¬
        2
      /   \
     3     5
    / \   /
   7   4 6

- ë§ˆì§€ë§‰ ë…¸ë“œ(6ë²ˆ)ì˜ ì¡°ìƒ: 3ë²ˆ, 1ë²ˆ ë…¸ë“œ

3. ë¬¸ì œ ìš”êµ¬ì‚¬í•­

- ì„œë¡œ ë‹¤ë¥¸ ìì—°ìˆ˜ë“¤ì´ ì…ë ¥ ìˆœì„œëŒ€ë¡œ ì´ì§„ ìµœì†Œí™ì— ì‚½ì…ëœë‹¤.
- ë§ˆì§€ë§‰ ë…¸ë“œì˜ ì¡°ìƒ ë…¸ë“œì— ì €ì¥ëœ ì •ìˆ˜ì˜ í•©ì„ ì¶œë ¥í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•´ì•¼ í•œë‹¤.

ğŸ‘‰ í•µì‹¬: ì…ë ¥ â†’ ìµœì†Œí™ ìƒì„± â†’ ë§ˆì§€ë§‰ ë…¸ë“œ ì¡°ìƒ ì¶”ì  â†’ ì¡°ìƒ ê°’ í•©ì‚°
"""
import sys
sys.stdin = open('5177_input.txt')


T = int(input())
for tc in range(1, T + 1):
    N = int(input())
    bt = [0] * (N + 1)
    arr = list(map(int, input().split()))

    for i in range(1, N + 1):
        bt[i] = arr[0]
        arr.pop(0)
        # ìµœì†Œ í™ ì¡°ê±´ ìœ ì§€ : ë¶€ëª¨ë³´ë‹¤ ê°’ì´ ì‘ìœ¼ë©´ êµí™˜
        while i > 0 and bt[i] < bt[i // 2]:
            bt[i], bt[i // 2] = bt[i // 2], bt[i]
            i //= 2

    parents = N // 2
    result = 0
    while bt[parents]:
        result += bt[parents]
        parents //= 2

    print(f'#{tc} {result}')




